<!DOCTYPE html >
<html ng-app="PolyTaskUser">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"> <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular.min.js"></script>

</head>
<body ng-controller="userController">
<div class="container">
<input type="text" class="form-control" placeholder="username"  ng-model="username.text">
<input type="password" class="form-control" placeholder="password"  ng-model="password.text">
<span class="input-group-btn">
        <button type="submit" ng-click="create_user()" class="btn btn-primary">Partager</button>
</span>
</div>
</body>

<script>
    angular.module('PolyTaskUser', []).controller('userController',function($scope,$http){

        $scope.create_user = function(){
            var user = {
                username :$scope.username.text,
                password : $scope.password.text
            }
            $http({
                method: 'POST',
                url: '/test_users',
                data :user
            }).then(function successCallback(response) {
                window.location.href="feed.html"
            }, function errorCallback(response) {
                alert(response.data.message)
            });
        }
    });
</script>
</html>